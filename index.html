<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infogr√°fico: Solu√ß√µes para CNH e Multas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #073B4C;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #FFD166;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .visible {
            opacity: 1;
            transform: translateY(0);
        }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .faq-question.active + .faq-answer {
            max-height: 200px; /* Adjust as needed */
        }
         .faq-question svg {
            transition: transform 0.3s ease-out;
        }
        .faq-question.active svg {
            transform: rotate(180deg);
        }
    </style>
</head>
<body class="text-white antialiased">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center my-12">
            <h1 class="text-4xl md:text-6xl font-black text-[#FFD166]">Defenda seu Direito de Dirigir</h1>
            <p class="text-lg md:text-xl mt-4 max-w-3xl mx-auto text-gray-200">Oferecemos solu√ß√µes pr√°ticas e r√°pidas para Suspens√£o de CNH e Revis√£o de Multas em Santa Catarina.</p>
        </header>

        <main>
            <section id="services" class="mb-16 fade-in">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-white">Nossos Servi√ßos</h2>
                    <p class="text-gray-300 mt-2">Entenda como podemos ajudar a resolver seus problemas com a CNH e multas de tr√¢nsito.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-[#118AB2] p-8 rounded-2xl shadow-2xl border-2 border-[#06D6A0]">
                        <h3 class="text-2xl font-bold mb-4 text-[#FFD166]">üö¶ Suspens√£o de CNH</h3>
                        <p class="text-gray-200">Seu direito de dirigir est√° em risco? Todo condutor tem direito √† defesa. Cuidamos de todo o processo, seja administrativo ou judicial, para garantir que voc√™ continue dirigindo. Analisamos cada detalhe para construir a melhor estrat√©gia para o seu caso.</p>
                    </div>
                    <div class="bg-[#118AB2] p-8 rounded-2xl shadow-2xl border-2 border-[#FF6B6B]">
                        <h3 class="text-2xl font-bold mb-4 text-[#FFD166]">üìÑ Revis√£o de Multas</h3>
                        <p class="text-gray-200">Recebeu uma multa grave ou grav√≠ssima acima de R$ 500,00? Nossa equipe √© especialista em encontrar inconsist√™ncias e erros formais nos autos de infra√ß√£o que podem levar √† anula√ß√£o da multa e dos pontos na sua CNH.</p>
                    </div>
                </div>
            </section>

            <section id="process" class="mb-16 fade-in">
                 <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-white">Como Funciona Nosso Processo?</h2>
                    <p class="text-gray-300 mt-2">Temos um fluxo de trabalho transparente, do in√≠cio ao fim.</p>
                </div>
                <div class="bg-[#073B4C] border-2 border-[#118AB2] p-8 rounded-2xl shadow-2xl">
                    <div class="flex flex-col md:flex-row items-center justify-between space-y-8 md:space-y-0 md:space-x-8">
                        <div class="text-center flex-1">
                            <div class="text-4xl mb-2">1</div>
                            <h4 class="text-xl font-semibold mb-2 text-[#06D6A0]">Consulta e An√°lise</h4>
                            <p class="text-gray-300">Acessamos sua situa√ß√£o via Gov.br ou protocolo da multa para uma an√°lise completa de prazos e possibilidades.</p>
                        </div>
                        <div class="text-5xl text-[#118AB2] hidden md:block">‚Üí</div>
                         <div class="text-5xl text-[#118AB2] md:hidden">‚Üì</div>
                        <div class="text-center flex-1">
                            <div class="text-4xl mb-2">2</div>
                            <h4 class="text-xl font-semibold mb-2 text-[#06D6A0]">Defesa Administrativa</h4>
                            <p class="text-gray-300">Atuamos nas 3 inst√¢ncias de defesa, com prazos de 30 dias por fase, buscando a anula√ß√£o na via administrativa.</p>
                        </div>
                        <div class="text-5xl text-[#118AB2] hidden md:block">‚Üí</div>
                         <div class="text-5xl text-[#118AB2] md:hidden">‚Üì</div>
                        <div class="text-center flex-1">
                            <div class="text-4xl mb-2">3</div>
                            <h4 class="text-xl font-semibold mb-2 text-[#06D6A0]">A√ß√£o Judicial</h4>
                            <p class="text-gray-300">Caso a via administrativa se esgote, partimos para a a√ß√£o judicial, focando em inconsist√™ncias para obter √™xito.</p>
                        </div>
                    </div>
                     <div class="mt-8 text-center bg-[#118AB2] p-4 rounded-lg">
                        <p class="font-bold text-lg text-white"><span class="text-2xl mr-2">üí°</span>Fato Importante: O DETRAN tem at√© 5 anos para instaurar o processo de suspens√£o. Sempre h√° tempo para uma boa defesa!</p>
                    </div>
                </div>
            </section>

             <section id="gemini-tools" class="mb-16 fade-in">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-white">Ferramentas com IA ‚ú®</h2>
                    <p class="text-gray-300 mt-2">Use nossa intelig√™ncia artificial para obter an√°lises e respostas instant√¢neas.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-[#118AB2] p-8 rounded-2xl shadow-2xl">
                        <h3 class="text-2xl font-bold mb-4 text-[#FFD166]">Analisador de Multa</h3>
                        <p class="text-gray-200 mb-4">Envie uma foto do seu auto de infra√ß√£o ou cole o texto abaixo para nossa IA analisar em busca de poss√≠veis erros para sua defesa.</p>
                        
                        <label for="ticket-image-upload" class="w-full cursor-pointer bg-[#073B4C] text-white font-bold py-3 px-6 rounded-lg hover:bg-opacity-90 transition-colors flex items-center justify-center">
                            <span>üì∑ Enviar Foto da Multa</span>
                        </label>
                        <input type="file" id="ticket-image-upload" class="hidden" accept="image/*">
                        
                        <div id="image-preview-container" class="hidden my-4 relative text-center">
                            <img id="image-preview" class="max-h-48 w-auto inline-block rounded-lg" alt="Pr√©-visualiza√ß√£o da Multa">
                            <button id="remove-image-btn" class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full h-7 w-7 flex items-center justify-center font-bold text-lg leading-none">&times;</button>
                        </div>

                        <div class="text-center my-2 text-gray-300">ou</div>

                        <textarea id="ticket-text" rows="4" class="w-full p-3 rounded-lg bg-[#073B4C] text-white placeholder-gray-400 border-2 border-transparent focus:border-[#FFD166] focus:outline-none disabled:opacity-50" placeholder="Cole o texto completo do auto de infra√ß√£o aqui..."></textarea>
                        <button id="analyze-btn" class="w-full mt-4 bg-[#06D6A0] text-[#073B4C] font-bold py-3 px-6 rounded-lg hover:bg-opacity-90 transition-colors">Analisar com IA ‚ú®</button>
                        <div id="analysis-loader" class="hidden justify-center mt-4"><div class="spinner"></div></div>
                        <div id="analysis-result" class="mt-4 p-4 bg-[#073B4C] rounded-lg text-gray-200 hidden"></div>
                        <button id="copy-btn" class="w-full mt-4 bg-[#FFD166] text-[#073B4C] font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors hidden">Copiar An√°lise üìã</button>
                    </div>
                    <div class="bg-[#118AB2] p-8 rounded-2xl shadow-2xl">
                        <h3 class="text-2xl font-bold mb-4 text-[#FFD166]">Consultor Virtual</h3>
                        <p class="text-gray-200 mb-4">Tem alguma d√∫vida sobre leis de tr√¢nsito, pontos na CNH ou prazos? Pergunte ao nosso consultor virtual.</p>
                        <input type="text" id="consultant-question" class="w-full p-3 rounded-lg bg-[#073B4C] text-white placeholder-gray-400 border-2 border-transparent focus:border-[#FFD166] focus:outline-none" placeholder="Ex: Quantos pontos gera a multa por celular?">
                        <button id="ask-btn" class="w-full mt-4 bg-[#06D6A0] text-[#073B4C] font-bold py-3 px-6 rounded-lg hover:bg-opacity-90 transition-colors">Perguntar ao Consultor ‚ú®</button>
                        <div id="consultant-loader" class="hidden justify-center mt-4"><div class="spinner"></div></div>
                        <div id="consultant-result" class="mt-4 p-4 bg-[#073B4C] rounded-lg text-gray-200 hidden"></div>
                    </div>
                </div>
            </section>
            
            <section id="clients-values" class="mb-16 fade-in">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-[#118AB2] p-8 rounded-2xl shadow-2xl">
                        <h2 class="text-3xl font-bold text-center mb-6 text-white">Nosso P√∫blico-Alvo</h2>
                        <p class="text-center text-gray-300 mb-6">Atendemos uma gama diversificada de motoristas que dependem de sua CNH para o trabalho e para o dia a dia. Este gr√°fico mostra a distribui√ß√£o dos nossos principais perfis de clientes.</p>
                        <div class="chart-container">
                            <canvas id="clientProfileChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-[#118AB2] p-8 rounded-2xl shadow-2xl">
                        <h2 class="text-3xl font-bold text-center mb-6 text-white">Comparativo de Investimentos</h2>
                         <p class="text-center text-gray-300 mb-6">Oferecemos diferentes n√≠veis de servi√ßo para a suspens√£o da CNH, com valores claros e transparentes. Este gr√°fico compara os custos de cada abordagem de defesa.</p>
                        <div class="chart-container">
                            <canvas id="serviceValuesChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="faq" class="mb-16 fade-in">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-white">Perguntas Frequentes (FAQ)</h2>
                    <p class="text-gray-300 mt-2">Tire suas d√∫vidas mais comuns sobre o processo de defesa de multas e suspens√£o da CNH.</p>
                </div>
                <div class="max-w-3xl mx-auto space-y-4">
                    <div class="bg-[#118AB2] rounded-2xl">
                        <button class="faq-question w-full flex justify-between items-center text-left p-6 text-lg font-semibold text-white">
                            <span>Quanto tempo leva o processo de defesa?</span>
                            <svg class="w-6 h-6 text-[#FFD166]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer px-6 pb-6 text-gray-200">
                            <p>O tempo pode variar. A via administrativa geralmente leva alguns meses, pois cada inst√¢ncia de defesa tem um prazo para julgar. J√° o processo judicial pode ser mais longo, dependendo da complexidade do caso e da agilidade do sistema judici√°rio.</p>
                        </div>
                    </div>
                    <div class="bg-[#118AB2] rounded-2xl">
                        <button class="faq-question w-full flex justify-between items-center text-left p-6 text-lg font-semibold text-white">
                            <span>Tenho garantia de que minha multa ser√° cancelada?</span>
                            <svg class="w-6 h-6 text-[#FFD166]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer px-6 pb-6 text-gray-200">
                            <p>N√£o podemos garantir o resultado, pois a decis√£o final √© dos √≥rg√£os de tr√¢nsito ou do juiz. O que garantimos √© uma defesa t√©cnica e bem fundamentada, utilizando todos os argumentos legais e processuais poss√≠veis para aumentar ao m√°ximo suas chances de sucesso.</p>
                        </div>
                    </div>
                    <div class="bg-[#118AB2] rounded-2xl">
                        <button class="faq-question w-full flex justify-between items-center text-left p-6 text-lg font-semibold text-white">
                            <span>Posso continuar dirigindo durante o processo?</span>
                            <svg class="w-6 h-6 text-[#FFD166]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer px-6 pb-6 text-gray-200">
                            <p>Sim. Enquanto houver um recurso pendente de julgamento (seja na via administrativa ou judicial), a penalidade de suspens√£o n√£o pode ser aplicada. Voc√™ pode continuar dirigindo normalmente at√© que o processo seja conclu√≠do em todas as inst√¢ncias.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="contact" class="mb-16 fade-in">
                 <div class="bg-[#073B4C] border-2 border-[#118AB2] p-8 rounded-2xl shadow-2xl max-w-3xl mx-auto">
                     <h2 class="text-3xl font-bold text-center mb-2 text-white">Fale Conosco</h2>
                     <p class="text-center text-gray-300 mb-6">Tem interesse em nossos servi√ßos? Preencha o formul√°rio abaixo e entraremos em contato o mais breve poss√≠vel.</p>
                     <form action="#" method="POST">
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                             <div>
                                 <label for="name" class="block text-sm font-medium text-gray-200">Nome</label>
                                 <input type="text" name="name" id="name" required class="mt-1 block w-full p-3 rounded-lg bg-[#118AB2] text-white border-2 border-transparent focus:border-[#FFD166] focus:outline-none">
                             </div>
                             <div>
                                 <label for="contact-info" class="block text-sm font-medium text-gray-200">Email ou WhatsApp</label>
                                 <input type="text" name="contact-info" id="contact-info" required class="mt-1 block w-full p-3 rounded-lg bg-[#118AB2] text-white border-2 border-transparent focus:border-[#FFD166] focus:outline-none">
                             </div>
                         </div>
                         <div class="mt-6">
                             <label for="message" class="block text-sm font-medium text-gray-200">Mensagem</label>
                             <textarea name="message" id="message" rows="4" required class="mt-1 block w-full p-3 rounded-lg bg-[#118AB2] text-white border-2 border-transparent focus:border-[#FFD166] focus:outline-none" placeholder="Conte-nos brevemente sobre o seu caso..."></textarea>
                         </div>
                         <div class="mt-6 text-center">
                            <button type="submit" class="w-full md:w-auto bg-[#FFD166] text-[#073B4C] font-bold py-3 px-10 rounded-lg hover:bg-opacity-90 transition-colors">Enviar Contato</button>
                         </div>
                     </form>
                 </div>
            </section>
            
            <section id="alternatives-docs" class="mb-16 fade-in">
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                     <div class="bg-[#073B4C] border-2 border-[#118AB2] p-8 rounded-2xl shadow-2xl text-center">
                        <h3 class="text-2xl font-bold mb-4 text-[#FFD166]">üìò Solu√ß√£o Alternativa "Fa√ßa Voc√™ Mesmo"</h3>
                        <p class="text-gray-200 mb-4">Para multas de valor inferior a R$ 500,00, oferecemos uma solu√ß√£o econ√¥mica e eficaz. Nosso E-book detalha o passo a passo para voc√™ mesmo realizar sua defesa.</p>
                        <div class="bg-[#FFD166] text-[#073B4C] font-bold text-3xl py-3 px-6 rounded-lg inline-block">
                            Apenas R$ 49,90
                        </div>
                    </div>
                    <div class="bg-[#073B4C] border-2 border-[#118AB2] p-8 rounded-2xl shadow-2xl">
                        <h3 class="text-2xl font-bold mb-4 text-[#FFD166]">üìù Documentos para Come√ßar</h3>
                        <ul class="list-none space-y-3 text-gray-200">
                            <li class="flex items-center"><span class="text-[#06D6A0] text-2xl mr-3">‚úî</span> Senha Gov.br ou Protocolo da multa</li>
                            <li class="flex items-center"><span class="text-[#06D6A0] text-2xl mr-3">‚úî</span> CNH (Carteira Nacional de Habilita√ß√£o)</li>
                            <li class="flex items-center"><span class="text-[#06D6A0] text-2xl mr-3">‚úî</span> Comprovante de resid√™ncia</li>
                            <li class="flex items-center"><span class="text-[#06D6A0] text-2xl mr-3">‚úî</span> Procura√ß√£o e Contrato (fornecidos por n√≥s)</li>
                        </ul>
                    </div>
                 </div>
            </section>
        </main>

        <footer class="text-center py-8 mt-8 border-t border-gray-700">
            <p class="text-gray-300">Central de Pequenas Causas - Protegendo seu direito de dirigir.</p>
            <p class="text-gray-400 text-sm mt-2">N√£o perca sua CNH! Fale conosco e resolva seu problema.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const apiKey = "AIzaSyBUJI7tfkmq6PGZFyVYzEVtfo8KpUp_TTo"; 

            const analyzeBtn = document.getElementById('analyze-btn');
            const ticketText = document.getElementById('ticket-text');
            const analysisLoader = document.getElementById('analysis-loader');
            const analysisResult = document.getElementById('analysis-result');
            const copyBtn = document.getElementById('copy-btn');
            const ticketImageUpload = document.getElementById('ticket-image-upload');
            const imagePreviewContainer = document.getElementById('image-preview-container');
            const imagePreview = document.getElementById('image-preview');
            const removeImageBtn = document.getElementById('remove-image-btn');

            let base64ImageData = null;
            let fileMimeType = null;

            const askBtn = document.getElementById('ask-btn');
            const consultantQuestion = document.getElementById('consultant-question');
            const consultantLoader = document.getElementById('consultant-loader');
            const consultantResult = document.getElementById('consultant-result');

            async function callGeminiAPI(payload, loader, resultElement, buttonElement) {
                loader.style.display = 'flex';
                resultElement.style.display = 'none';
                if (resultElement === analysisResult) copyBtn.style.display = 'none';
                buttonElement.disabled = true;

                try {
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API Error: ${response.status} ${response.statusText}`);
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];
                    let text = "N√£o foi poss√≠vel obter uma resposta. Tente novamente.";
                    
                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        text = candidate.content.parts[0].text;
                    }
                    
                    resultElement.innerHTML = formatResponseText(text);
                    resultElement.style.display = 'block';
                    if (resultElement === analysisResult) copyBtn.style.display = 'block';

                } catch (error) {
                    resultElement.innerText = 'Ocorreu um erro ao processar sua solicita√ß√£o. Por favor, tente novamente mais tarde.';
                    resultElement.style.display = 'block';
                    console.error("Gemini API call failed:", error);
                } finally {
                    loader.style.display = 'none';
                    buttonElement.disabled = false;
                }
            }
            
            function formatResponseText(text) {
                return text
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="text-[#FFD166]">$1</strong>') // Bold
                    .replace(/\*(.*?)\*/g, '<em>$1</em>') // Italics
                    .replace(/\n/g, '<br>'); // Newlines
            }

            ticketImageUpload.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    fileMimeType = file.type;
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        base64ImageData = reader.result.split(',')[1];
                        imagePreview.src = reader.result;
                        imagePreviewContainer.style.display = 'block';
                        ticketText.value = '';
                        ticketText.disabled = true;
                    };
                    reader.readAsDataURL(file);
                }
            });

            removeImageBtn.addEventListener('click', () => {
                base64ImageData = null;
                fileMimeType = null;
                imagePreview.src = '';
                imagePreviewContainer.style.display = 'none';
                ticketImageUpload.value = '';
                ticketText.disabled = false;
            });

            analyzeBtn.addEventListener('click', () => {
                copyBtn.style.display = 'none';
                const ticketContent = ticketText.value.trim();

                if (!ticketContent && !base64ImageData) {
                    analysisResult.innerText = 'Por favor, insira o texto ou envie uma foto do auto de infra√ß√£o.';
                    analysisResult.style.display = 'block';
                    return;
                }

                const systemPrompt = "Voc√™ √© um especialista em legisla√ß√£o de tr√¢nsito brasileira, com foco em Santa Catarina. Aja como um assistente que ajuda motoristas a entenderem suas multas. Seja objetivo e profissional.";
                
                const payloadParts = [];
                if (base64ImageData) {
                    const userQuery = "Analise a imagem deste auto de infra√ß√£o de tr√¢nsito. Transcreva o texto chave da multa e, em seguida, identifique em t√≥picos curtos e claros, poss√≠veis erros formais, inconsist√™ncias ou argumentos que poderiam ser usados em uma defesa administrativa. Se n√£o encontrar erros √≥bvios, informe que o auto parece estar correto, mas que uma an√°lise profissional √© recomendada.";
                    payloadParts.push({ text: userQuery });
                    payloadParts.push({
                        inlineData: {
                            mimeType: fileMimeType,
                            data: base64ImageData
                        }
                    });
                } else {
                    const userQuery = `Analise o seguinte texto de um auto de infra√ß√£o de tr√¢nsito. Identifique em t√≥picos curtos e claros, poss√≠veis erros formais, inconsist√™ncias ou argumentos que poderiam ser usados em uma defesa administrativa. Se n√£o encontrar erros √≥bvios, informe que o auto parece estar correto, mas que uma an√°lise profissional √© recomendada. Texto da multa: "${ticketContent}"`;
                    payloadParts.push({ text: userQuery });
                }
                
                const payload = {
                    contents: [{ parts: payloadParts }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                callGeminiAPI(payload, analysisLoader, analysisResult, analyzeBtn);
            });


            askBtn.addEventListener('click', () => {
                const question = consultantQuestion.value.trim();
                if (!question) {
                    consultantResult.innerText = 'Por favor, digite sua pergunta.';
                    consultantResult.style.display = 'block';
                    return;
                }
                const systemPrompt = "Voc√™ √© um consultor virtual especialista em legisla√ß√£o de tr√¢nsito do Brasil. Forne√ßa respostas claras, diretas e concisas. Baseie suas respostas nas informa√ß√µes mais atuais dispon√≠veis.";
                const userQuery = `Responda a seguinte pergunta sobre tr√¢nsito: "${question}"`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                    tools: [{ "google_search": {} }],
                };

                callGeminiAPI(payload, consultantLoader, consultantResult, askBtn);
            });

            copyBtn.addEventListener('click', () => {
                const textToCopy = analysisResult.innerText;
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    copyBtn.innerText = 'Copiado! ‚úÖ';
                } catch (err) {
                    console.error('Fallback: Oops, unable to copy', err);
                    copyBtn.innerText = 'Erro ao copiar';
                }
                document.body.removeChild(textArea);
                setTimeout(() => {
                    copyBtn.innerText = 'Copiar An√°lise üìã';
                }, 2000);
            });

            const faders = document.querySelectorAll('.fade-in');
            const appearOptions = {
                threshold: 0.2,
            };
            const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll) {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) {
                        return;
                    } else {
                        entry.target.classList.add('visible');
                        appearOnScroll.unobserve(entry.target);
                    }
                });
            }, appearOptions);

            faders.forEach(fader => {
                appearOnScroll.observe(fader);
            });

            const faqQuestions = document.querySelectorAll('.faq-question');
            faqQuestions.forEach(question => {
                question.addEventListener('click', () => {
                    const currentlyActive = document.querySelector('.faq-question.active');
                    if (currentlyActive && currentlyActive !== question) {
                        currentlyActive.classList.remove('active');
                    }
                    question.classList.toggle('active');
                });
            });

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };

            const defaultChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: '#FFFFFF',
                            font: {
                                size: 14
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    }
                }
            };

            const clientProfileCtx = document.getElementById('clientProfileChart').getContext('2d');
            new Chart(clientProfileCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Motoristas Profissionais', 'Dependentes do Ve√≠culo', 'Condutores com Multas Graves'],
                    datasets: [{
                        label: 'Perfil de Clientes',
                        data: [45, 35, 20],
                        backgroundColor: ['#FF6B6B', '#FFD166', '#06D6A0'],
                        borderColor: '#118AB2',
                        borderWidth: 3
                    }]
                },
                options: { ...defaultChartOptions }
            });

            const serviceValuesCtx = document.getElementById('serviceValuesChart').getContext('2d');
            new Chart(serviceValuesCtx, {
                type: 'bar',
                data: {
                    labels: ['Defesa ADM', 'A√ß√£o Judicial', 'Medidas Urgentes'],
                    datasets: [{
                        label: 'Valor do Servi√ßo (R$)',
                        data: [2000, 3000, 5000],
                        backgroundColor: ['#06D6A0', '#FFD166', '#FF6B6B'],
                        borderColor: '#073B4C',
                        borderWidth: 2,
                        borderRadius: 5
                    }]
                },
                options: {
                    ...defaultChartOptions,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#FFFFFF',
                                callback: function(value) {
                                    return 'R$ ' + value;
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#FFFFFF'
                            },
                             grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        });
    </script>

</body>
</html>